{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vladi Gotsin\\\\Desktop\\\\react\\\\src\\\\Chess.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Square({\n  dark,\n  piece,\n  x,\n  y,\n  move\n}) {\n  let c = \"chessSquare piece\";\n  c = dark ? c + ' dark' : c;\n  let p, cl;\n  if (piece != undefined) {\n    c = c + ' ' + piece;\n    p = piece.split('-')[1][0];\n    p = p == 'k' ? piece.split('-')[1][1] == 'n' ? 'n' : p : p;\n    cl = piece.split('-')[0][0] == 'w' ? true : false;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: c,\n    x: x,\n    y: y,\n    onClick: () => move(p, cl, x, y)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 12\n  }, this);\n}\n_c = Square;\nfunction Board({\n  position,\n  move\n}) {\n  let color;\n  let piece;\n  let rows = [];\n  let key = 1;\n  let white = true;\n  let x = 0;\n  let y = 0;\n  for (let i = 0; i < position.length; i++) {\n    y = 0;\n    for (let j = 0; j < position[i].length; j++) {\n      if (position[i].charCodeAt(j) >= 97 && position[i].charCodeAt(j) <= 122) {\n        color = 'black';\n      } else if (position[i].charCodeAt(j) >= 65 && position[i].charCodeAt(j) <= 90) {\n        color = 'white';\n      } else {\n        color = undefined;\n      }\n      switch (position[i][j].toLowerCase()) {\n        case \"p\":\n          piece = 'pawn';\n          break;\n        case 'n':\n          piece = 'knight';\n          break;\n        case 'k':\n          piece = 'king';\n          break;\n        case 'q':\n          piece = 'queen';\n          break;\n        case 'b':\n          piece = 'bishop';\n          break;\n        case 'r':\n          piece = 'rook';\n          break;\n        default:\n          piece = undefined;\n          break;\n      }\n      if (piece != undefined && color != undefined) {\n        rows.push( /*#__PURE__*/_jsxDEV(Square, {\n          dark: white ? false : true,\n          piece: color + '-' + piece,\n          x: x,\n          y: y,\n          move: move\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 27\n        }, this));\n        if (key % 8 != 0) {\n          white = !white;\n        }\n        key++;\n        y++;\n      } else {\n        for (let k = 0; k < Number(position[i][j]); k++) {\n          rows.push( /*#__PURE__*/_jsxDEV(Square, {\n            dark: white ? false : true,\n            x: x,\n            y: y,\n            move: move\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 31\n          }, this));\n          if (key % 8 != 0) {\n            white = !white;\n          }\n          key++;\n          y++;\n        }\n      }\n    }\n    x++;\n  }\n  return rows;\n}\n_c2 = Board;\nexport default function Chess() {\n  _s();\n  const [boardPosition, setBoardPosition] = useState(['rnbqkbnr', 'pppppppp', '8', '8', '8', '8', 'PPPPPPPP', 'RNBQKBNR']);\n  const [selectedPiece, setSelectedPiece] = useState('');\n  const [oldX, setOldX] = useState('');\n  const [oldY, setOldY] = useState('');\n  const [allowedMoves, setAllowedMoves] = useState([]);\n  function handleCapture() {\n    console.log('NOT IMPLEMENTED!!!');\n  }\n  function convertFenToString(fen) {\n    let result = '';\n    for (let i = 0; i < fen.length; i++) {\n      if (fen.charCodeAt(i) >= 48 && fen.charCodeAt(i) <= 57) {\n        result += ' '.repeat(Number(fen[i]));\n      } else {\n        result += fen[i];\n      }\n    }\n    return result;\n  }\n  function convertStringToFen(str) {\n    for (let i = str.length - 1; i >= 0; i--) {\n      if (str[i] == ' ') {\n        if (i < str.length - 1) {\n          if (str.charCodeAt(i + 1) >= 48 && str.charCodeAt(i + 1) <= 57) {\n            str = str.substring(0, i) + (Number(str[i + 1]) + 1).toString() + str.substring(i + 1, str.length);\n            str = str.slice(0, i + 1) + str.slice(i + 2);\n          } else {\n            str = str.substring(0, i) + '1' + str.substring(i + 1, str.length);\n          }\n        } else {\n          str = str.substring(0, i) + '1' + str.substring(i + 1, str.length);\n        }\n      }\n    }\n    return str;\n  }\n  function Move(p, c, x, y) {\n    if (selectedPiece) {\n      //allows to deselect a piece\n      if (x == oldX) {\n        if (y == oldY) {\n          setSelectedPiece('');\n          setOldX('');\n          setOldY('');\n          return;\n        }\n      }\n      let row = boardPosition[x];\n      let newRow = '';\n      let oldRow = '';\n      let allowed = false;\n\n      //check if the move you're making is legal\n      for (let i = 0; i < allowedMoves.length; i++) {\n        let move = allowedMoves[i];\n        if (x == move[0]) {\n          if (y == move[1]) {\n            allowed = true;\n          }\n        }\n      }\n\n      //stop if illegal move is used\n      if (!allowed) {\n        setOldX('');\n        setOldY('');\n        setSelectedPiece('');\n        return;\n      }\n\n      //convert FEN to string, update the position and convert back to FEN\n      newRow = convertFenToString(row);\n      if (newRow[y] != ' ') {\n        handleCapture();\n        setOldX('');\n        setOldY('');\n        setSelectedPiece('');\n        return;\n      }\n      newRow = newRow.substring(0, y) + selectedPiece + newRow.substring(y + 1, newRow.length);\n      newRow = convertStringToFen(newRow);\n\n      //get the old position; if same row, get the current new position\n      row = x == oldX ? newRow : boardPosition[oldX];\n\n      //convert FEN to string, update the old position and convert back to FEN\n      oldRow = convertFenToString(row);\n      oldRow = oldRow.substring(0, oldY) + ' ' + oldRow.substring(oldY + 1, oldRow.length);\n      oldRow = convertStringToFen(oldRow);\n\n      //create a new board position and update the board\n      let newBoard = [];\n      for (let i = 0; i < boardPosition.length; i++) {\n        if (i == x || i == oldX) {\n          //use the old position if it's the same row as the old position will be updating the current newPosition and will have the most up-to-date values\n          if (x == oldX) {\n            newBoard.push(oldRow);\n          } else if (i == x) {\n            newBoard.push(newRow);\n          } else if (i == oldX) {\n            newBoard.push(oldRow);\n          }\n        } else {\n          newBoard.push(boardPosition[i]);\n        }\n      }\n\n      //update the board and reset the variables\n      setBoardPosition(newBoard);\n      setOldX('');\n      setOldY('');\n      setSelectedPiece('');\n    } else {\n      switch (p) {\n        case \"p\":\n          if (c) {\n            if (x == 6) {\n              setAllowedMoves([[x - 1, y], [x - 2, y]]);\n            } else {\n              setAllowedMoves([[x - 1, y]]);\n            }\n          } else {\n            if (x == 1) {\n              setAllowedMoves([[x + 1, y], [x + 2, y]]);\n            } else {\n              setAllowedMoves([[x + 1, y]]);\n            }\n          }\n          break;\n        case \"r\":\n          let rookMoves = [];\n          for (let i = 0; i < 8; i++) {\n            rookMoves.push([i, y]);\n            rookMoves.push([x, i]);\n          }\n          setAllowedMoves(rookMoves);\n          break;\n        case \"n\":\n          break;\n        case \"b\":\n          let bishopMoves = [];\n          for (let i = 1; i <= 8; i++) {\n            if (x - i >= 0 && y - 1 >= 0) {\n              bishopMoves.push([x - i, y - i]);\n            }\n            if (x + 1 < 8 && y + i < 8) {\n              bishopMoves.push([x + i, y + i]);\n            }\n            if (x + 1 < 8 && y - 1 >= 0) {\n              bishopMoves.push([x + i, y - i]);\n            }\n            if (x - i >= 0 && y + 1 < 8) {\n              bishopMoves.push([x - i, y + i]);\n            }\n          }\n          setAllowedMoves(bishopMoves);\n          break;\n        case \"q\":\n          break;\n        case \"k\":\n          let kingMoves = [];\n          for (let i = x - 1; i <= x + 1; i++) {\n            for (let j = y - 1; j <= y + 1; j++) {\n              //handle edges\n              if (i >= 0 && i < 8) {\n                if (j >= 0 && j < 8) {\n                  kingMoves.push([i, j]);\n                }\n              }\n            }\n          }\n          setAllowedMoves(kingMoves);\n          break;\n        default:\n          break;\n      }\n      if (p != undefined && c != undefined) {\n        p = c ? p.toUpperCase() : p;\n        setSelectedPiece(p);\n        setOldX(x);\n        setOldY(y);\n      }\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chessContainer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"grid\",\n        className: \"chessGrid\",\n        children: /*#__PURE__*/_jsxDEV(Board, {\n          position: boardPosition,\n          move: Move\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(Chess, \"4Xa7fgjpZWQ8iqku703Ls2qoAIs=\");\n_c3 = Chess;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Square\");\n$RefreshReg$(_c2, \"Board\");\n$RefreshReg$(_c3, \"Chess\");","map":{"version":3,"names":["useState","jsxDEV","_jsxDEV","Fragment","_Fragment","Square","dark","piece","x","y","move","c","p","cl","undefined","split","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","Board","position","color","rows","key","white","i","length","j","charCodeAt","toLowerCase","push","k","Number","_c2","Chess","_s","boardPosition","setBoardPosition","selectedPiece","setSelectedPiece","oldX","setOldX","oldY","setOldY","allowedMoves","setAllowedMoves","handleCapture","console","log","convertFenToString","fen","result","repeat","convertStringToFen","str","substring","toString","slice","Move","row","newRow","oldRow","allowed","newBoard","rookMoves","bishopMoves","kingMoves","toUpperCase","children","id","_c3","$RefreshReg$"],"sources":["C:/Users/Vladi Gotsin/Desktop/react/src/Chess.js"],"sourcesContent":["import { useState } from \"react\";\r\n\r\nfunction Square({ dark, piece, x, y, move }) {\r\n    let c = \"chessSquare piece\";\r\n    c = dark ? c + ' dark' : c;\r\n\r\n    let p, cl;\r\n\r\n    if (piece != undefined) {\r\n        c = c + ' ' + piece;\r\n        p = piece.split('-')[1][0];\r\n        p = p == 'k' ? (piece.split('-')[1][1] == 'n' ? 'n' : p) : p;\r\n        cl = piece.split('-')[0][0] == 'w' ? true : false;\r\n    }\r\n\r\n    return <div className={c} x={x} y={y} onClick={() => move(p, cl, x, y)}></div>\r\n}\r\n\r\nfunction Board({ position, move }) {\r\n\r\n    let color;\r\n    let piece;\r\n    let rows = [];\r\n    let key = 1;\r\n    let white = true;\r\n    let x = 0;\r\n    let y = 0;\r\n\r\n    for (let i = 0; i < position.length; i++) {\r\n        y = 0;\r\n        for (let j = 0; j < position[i].length; j++) {\r\n            if (position[i].charCodeAt(j) >= 97 && position[i].charCodeAt(j) <= 122) {\r\n                color = 'black';\r\n            } else if (position[i].charCodeAt(j) >= 65 && position[i].charCodeAt(j) <= 90) {\r\n                color = 'white';\r\n            } else {\r\n                color = undefined;\r\n            }\r\n\r\n            switch (position[i][j].toLowerCase()) {\r\n                case \"p\":\r\n                    piece = 'pawn';\r\n                    break;\r\n                case 'n':\r\n                    piece = 'knight';\r\n                    break;\r\n                case 'k':\r\n                    piece = 'king';\r\n                    break;\r\n                case 'q':\r\n                    piece = 'queen';\r\n                    break;\r\n                case 'b':\r\n                    piece = 'bishop';\r\n                    break;\r\n                case 'r':\r\n                    piece = 'rook';\r\n                    break;\r\n                default:\r\n                    piece = undefined;\r\n                    break;\r\n            }\r\n\r\n            if (piece != undefined && color != undefined) {\r\n                rows.push(<Square dark={white ? false : true} key={key} piece={color + '-' + piece} x={x} y={y} move={move}></Square>)\r\n                if (key % 8 != 0) {\r\n                    white = !white;\r\n                }\r\n                key++\r\n                y++;\r\n            } else {\r\n                for (let k = 0; k < Number(position[i][j]); k++) {\r\n                    rows.push(<Square dark={white ? false : true} key={key} x={x} y={y} move={move}></Square>)\r\n                    if (key % 8 != 0) {\r\n                        white = !white;\r\n                    }\r\n                    key++;\r\n                    y++\r\n                }\r\n            }\r\n        }\r\n        x++;\r\n    }\r\n\r\n    return rows;\r\n}\r\n\r\nexport default function Chess() {\r\n\r\n    const [boardPosition, setBoardPosition] = useState(\r\n        [\r\n            'rnbqkbnr',\r\n            'pppppppp',\r\n            '8',\r\n            '8',\r\n            '8',\r\n            '8',\r\n            'PPPPPPPP',\r\n            'RNBQKBNR'\r\n        ]);\r\n\r\n    const [selectedPiece, setSelectedPiece] = useState('');\r\n    const [oldX, setOldX] = useState('');\r\n    const [oldY, setOldY] = useState('');\r\n    const [allowedMoves, setAllowedMoves] = useState([])\r\n\r\n    function handleCapture() {\r\n        console.log('NOT IMPLEMENTED!!!');\r\n    }\r\n\r\n    function convertFenToString(fen) {\r\n        let result = '';\r\n\r\n        for (let i = 0; i < fen.length; i++) {\r\n            if (fen.charCodeAt(i) >= 48 && fen.charCodeAt(i) <= 57) {\r\n                result += ' '.repeat(Number(fen[i]))\r\n            } else {\r\n                result += fen[i];\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    function convertStringToFen(str) {\r\n        for (let i = str.length - 1; i >= 0; i--) {\r\n            if (str[i] == ' ') {\r\n                if (i < str.length - 1) {\r\n                    if (str.charCodeAt(i + 1) >= 48 && str.charCodeAt(i + 1) <= 57) {\r\n                        str = str.substring(0, i) + (Number(str[i + 1]) + 1).toString() + str.substring(i + 1, str.length);\r\n                        str = str.slice(0, i + 1) + str.slice(i + 2);\r\n                    } else {\r\n                        str = str.substring(0, i) + '1' + str.substring(i + 1, str.length);\r\n                    }\r\n                } else {\r\n                    str = str.substring(0, i) + '1' + str.substring(i + 1, str.length);\r\n                }\r\n            }\r\n        }\r\n\r\n        return str;\r\n    }\r\n\r\n    function Move(p, c, x, y) {\r\n        if (selectedPiece) {\r\n\r\n            //allows to deselect a piece\r\n            if (x == oldX) {\r\n                if (y == oldY) {\r\n                    setSelectedPiece('')\r\n                    setOldX('')\r\n                    setOldY('')\r\n                    return\r\n                }\r\n            }\r\n\r\n            let row = boardPosition[x];\r\n            let newRow = '';\r\n            let oldRow = '';\r\n            let allowed = false;\r\n\r\n            //check if the move you're making is legal\r\n            for (let i = 0; i < allowedMoves.length; i++) {\r\n                let move = allowedMoves[i];\r\n\r\n                if (x == move[0]) {\r\n                    if (y == move[1]) {\r\n                        allowed = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            //stop if illegal move is used\r\n            if (!allowed) {\r\n                setOldX('')\r\n                setOldY('')\r\n                setSelectedPiece('')\r\n                return\r\n            }\r\n\r\n            //convert FEN to string, update the position and convert back to FEN\r\n            newRow = convertFenToString(row);\r\n\r\n            if (newRow[y] != ' ') {\r\n                handleCapture();\r\n                setOldX('')\r\n                setOldY('')\r\n                setSelectedPiece('')\r\n                return;\r\n            }\r\n\r\n            newRow = newRow.substring(0, y) + selectedPiece + newRow.substring(y + 1, newRow.length);\r\n            newRow = convertStringToFen(newRow);\r\n\r\n            //get the old position; if same row, get the current new position\r\n            row = x == oldX ? newRow : boardPosition[oldX];\r\n\r\n            //convert FEN to string, update the old position and convert back to FEN\r\n            oldRow = convertFenToString(row);\r\n            oldRow = oldRow.substring(0, oldY) + ' ' + oldRow.substring(oldY + 1, oldRow.length);\r\n            oldRow = convertStringToFen(oldRow);\r\n\r\n            //create a new board position and update the board\r\n            let newBoard = [];\r\n\r\n            for (let i = 0; i < boardPosition.length; i++) {\r\n                if (i == x || i == oldX) {\r\n                    //use the old position if it's the same row as the old position will be updating the current newPosition and will have the most up-to-date values\r\n                    if (x == oldX) {\r\n                        newBoard.push(oldRow);\r\n                    }\r\n                    else if (i == x) {\r\n                        newBoard.push(newRow);\r\n                    } else if (i == oldX) {\r\n                        newBoard.push(oldRow);\r\n                    }\r\n                } else {\r\n                    newBoard.push(boardPosition[i]);\r\n                }\r\n            }\r\n\r\n            //update the board and reset the variables\r\n            setBoardPosition(newBoard);\r\n            setOldX('')\r\n            setOldY('')\r\n            setSelectedPiece('')\r\n\r\n        } else {\r\n            switch (p) {\r\n                case \"p\":\r\n                    if (c) {\r\n                        if (x == 6) {\r\n                            setAllowedMoves([[x - 1, y], [x - 2, y]])\r\n                        } else {\r\n                            setAllowedMoves([[x - 1, y]])\r\n                        }\r\n                    } else {\r\n                        if (x == 1) {\r\n                            setAllowedMoves([[x + 1, y], [x + 2, y]])\r\n                        } else {\r\n                            setAllowedMoves([[x + 1, y]])\r\n                        }\r\n                    }\r\n                    break;\r\n                case \"r\":\r\n                    let rookMoves = [];\r\n                    for (let i = 0; i < 8; i++) {\r\n                        rookMoves.push([i, y]);\r\n                        rookMoves.push([x, i]);\r\n                    }\r\n                    setAllowedMoves(rookMoves)\r\n                    break;\r\n                case \"n\":\r\n                    break;\r\n                case \"b\":\r\n                    let bishopMoves = [];\r\n                    for (let i = 1; i <= 8; i++) {\r\n                        if (x - i >= 0 && y - 1 >= 0) {\r\n                            bishopMoves.push([x - i, y - i]);\r\n                        }\r\n\r\n                        if (x + 1 < 8 && y + i < 8) {\r\n                            bishopMoves.push([x + i, y + i]);\r\n                        }\r\n\r\n                        if (x + 1 < 8 && y - 1 >= 0) {\r\n                            bishopMoves.push([x + i, y - i]);\r\n                        }\r\n\r\n                        if (x - i >= 0 && y + 1 < 8) {\r\n                            bishopMoves.push([x - i, y + i]);\r\n                        }\r\n                    }\r\n                    setAllowedMoves(bishopMoves);\r\n                    break;\r\n                case \"q\":\r\n                    break;\r\n                case \"k\":\r\n                    let kingMoves = [];\r\n                    for (let i = x - 1; i <= x + 1; i++) {\r\n                        for (let j = y - 1; j <= y + 1; j++) {\r\n                            //handle edges\r\n                            if (i >= 0 && i < 8) {\r\n                                if (j >= 0 && j < 8) {\r\n                                    kingMoves.push([i, j]);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    setAllowedMoves(kingMoves);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (p != undefined && c != undefined) {\r\n                p = c ? p.toUpperCase() : p;\r\n\r\n                setSelectedPiece(p);\r\n                setOldX(x);\r\n                setOldY(y);\r\n            }\r\n        }\r\n    }\r\n\r\n    return (<>\r\n        <div className=\"chessContainer\">\r\n            <div id=\"grid\" className=\"chessGrid\">\r\n                <Board position={boardPosition} move={Move}></Board>\r\n            </div>\r\n        </div>\r\n    </>)\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}